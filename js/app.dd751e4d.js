(function(){"use strict";var e={27:function(e,t,a){var r=a(3751),s=a(641),o=a(33);const n={key:0},i={id:"columns",class:"columns is-inline-flex is-multiline is-mobile"};function l(e,t,a,l,c,u){const d=(0,s.g2)("Search"),p=(0,s.g2)("Cell"),m=(0,s.g2)("Tools");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r.eB,{name:"fade"},{default:(0,s.k6)((()=>[e.show_search?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(d)])):(0,s.Q3)("",!0)])),_:1}),(0,s.Lk)("div",{id:"grid",class:"container is-max-desktop py-5",onClick:t[0]||(t[0]=(...t)=>e.hideForm&&e.hideForm(...t))},[(0,s.Lk)("div",i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tiles,(t=>((0,s.uX)(),(0,s.Wv)(p,{class:(0,o.C4)(["image column p-0",{selected:t===e.selected_id,"is-half":4===e.tiles,"is-one-third":9===e.tiles,"is-one-quarter":16===e.tiles,"is-one-fifth":25===e.tiles}]),key:t,id:t,style:(0,o.Tr)({"box-shadow":"0px 0px 0px 1px "+(t===e.selected_id?e.complementary_color:e.color)})},null,8,["class","id","style"])))),128))])]),(0,s.bF)(m)],64)}var c=a(6278);const u=["src","title"],d={key:1,class:"icon-img icon is-medium"};function p(e,t,a,o,n,i){const l=(0,s.g2)("ion-icon");return(0,s.uX)(),(0,s.CE)("a",{href:"#",onClick:t[0]||(t[0]=(0,r.D$)(((...t)=>e.showSearch&&e.showSearch(...t)),["prevent"])),draggable:"true",onDragstart:t[1]||(t[1]=(...t)=>e.onDragStart&&e.onDragStart(...t)),onDragover:t[2]||(t[2]=(0,r.D$)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=(...t)=>e.onDrop&&e.onDrop(...t))},[e.currentImage?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.currentImage,title:e.title},null,8,u)):((0,s.uX)(),(0,s.CE)("span",d,[(0,s.bF)(l,{class:"is-size-1",name:"images-outline"})]))],32)}var m=a(953),g=(a(8111),a(7588),a(3329));const h=Symbol("store"),v=()=>(0,c.Pj)(h);var f=(0,c.y$)({state:{show_search:!1,selected_id:0,updater:e=>{},images:{},size:3,cached_source:null,color:localStorage.getItem("color")||"#ffffff",alpha:parseInt(localStorage.getItem("alpha")||"50"),draggedImage:null},mutations:{setDraggedImage(e,{id:t,bitmap:a}){e.draggedImage={id:t,bitmap:a}},clearDraggedImage(e){e.draggedImage=null},moveImage(e,{fromId:t,toId:a}){if(e.images[t]){const r=e.images[t],s=e.images[a];s?(e.images[t]=s,e.images[a]=r):(e.images[a]=r,delete e.images[t]),e.cached_source=null}},setShowSearch(e,t){e.show_search=t},setSelectedID(e,t){e.selected_id=t},setUpdater(e,t){e.updater=t},updateCell(e,t){e.cached_source=null,e.updater(t)},updateSize(e,t){e.cached_source=null;const a={};Object.keys(e.images).forEach((r=>{parseInt(r)<=t*t&&(a[r]=e.images[r])})),e.images=a,e.size=t},updateImages(e,{id:t,bitmap:a,image:r}){e.images[t]={bitmap:a,url:r}},updateColor(e,t){e.cached_source=null,e.color=t,localStorage.setItem("color",t)},updateAlpha(e,t){e.cached_source=null,e.alpha=t,localStorage.setItem("alpha",t)}},actions:{showSearch(e,{id:t,updater:a}){e.commit("setShowSearch",!0),e.commit("setSelectedID",t),e.commit("setUpdater",a)},hideSearch(e){e.commit("setShowSearch",!1),e.commit("setSelectedID",0)},updateCell(e,t){e.commit("updateCell",t)},updateImages(e,t){e.commit("updateImages",t)},updateSize(e,t){e.commit("updateSize",t)},updateColor(e,t){e.commit("updateColor",t)},updateAlpha(e,t){e.commit("updateAlpha",t)}},getters:{tiles(e){return e.size*e.size},complementary_color(e){return new g.A(e.color).mix((0,g.A)("darkblue")).hex()},color(e){return new g.A(e.color).alpha(e.alpha/100).hexa()}}}),b=(0,s.pM)({props:{id:{type:Number,required:!0}},setup(e){const t=v(),a=(0,m.KR)(""),r=(0,s.EW)((()=>{const a=t.state.images[e.id];return a?a.url:""})),o=r=>{a.value=r.title,t.dispatch("updateImages",{id:e.id,image:r.image,bitmap:r.bitmap})},n=()=>t.dispatch("showSearch",{id:e.id,updater:o}),i=t=>{t.dataTransfer&&t.dataTransfer.setData("text/plain",e.id.toString())},l=a=>{if(a.dataTransfer){const r=a.dataTransfer.getData("text/plain");t.commit("moveImage",{fromId:r,toId:e.id})}};return{currentImage:r,title:a,showSearch:n,onDragStart:i,onDrop:l}}}),w=a(6262);const _=(0,w.A)(b,[["render",p],["__scopeId","data-v-df669cb8"]]);var k=_;const y={class:"field",id:"search"},C={class:"tabs is-small"},S=["onClick"],I={class:"tabs is-small"},x=["onClick"],$={class:"control"},R=["placeholder"],L={key:0,class:"progress is-small is-info"},A={key:1,id:"results"},D={key:2};function E(e,t,a,n,i,l){const c=(0,s.g2)("Cropper"),u=(0,s.g2)("ion-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",y,[(0,s.Lk)("div",C,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.apiNames,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:(0,o.C4)({"is-active":e.currentApi===t})},[(0,s.Lk)("a",{class:"first-capitalized",href:"#",onClick:(0,r.D$)((a=>e.changeApi(t)),["prevent"])},(0,o.v_)(t),9,S)],2)))),128))])]),(0,s.Lk)("div",I,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tabs,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:(0,o.C4)({"is-active":e.currentTab===t})},[(0,s.Lk)("a",{class:"first-capitalized",href:"#",onClick:(0,r.D$)((a=>e.changeTab(t)),["prevent"])},(0,o.v_)(t),9,x)],2)))),128))])]),(0,s.Lk)("div",$,[(0,s.bo)((0,s.Lk)("input",{class:"input",placeholder:"Search "+e.currentTab+" or drag and drop images here",autocomplete:"off","onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),type:"text",id:"name",name:"name",onDragenter:t[1]||(t[1]=(0,r.D$)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,r.D$)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=(0,r.D$)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent"]))},null,40,R),[[r.Jo,e.query]])])]),e.loading?((0,s.uX)(),(0,s.CE)("progress",L)):e.results.length?((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.results,(t=>((0,s.uX)(),(0,s.Wv)(c,{onSelected:a=>e.selected=t,key:t.mal_id,result:t},null,8,["onSelected","result"])))),128))])):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("a",{href:"#",onClick:t[4]||(t[4]=(0,r.D$)(((...t)=>e.goBack&&e.goBack(...t)),["prevent"]))},[(0,s.bF)(u,{size:"large",name:"arrow-undo-outline"})],512),[[r.aG,e.showing_more]]),!e.has_show_more&&e.selected?((0,s.uX)(),(0,s.CE)("span",D,(0,o.v_)(e.selected.title),1)):!e.showing_more&&e.selected?((0,s.uX)(),(0,s.CE)("a",{key:3,href:"#",onClick:t[5]||(t[5]=(0,r.D$)((t=>e.showMore(e.currentTab)),["prevent"]))},[t[6]||(t[6]=(0,s.eW)("Show more of ",-1)),(0,s.Lk)("b",null,(0,o.v_)(e.selected.title),1)])):(0,s.Q3)("",!0)],64)}const z=["src","title"];function j(e,t,a,r,n,i){const l=(0,s.g2)("VueCropper");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e.clicked?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("img",{key:0,onClick:t[0]||(t[0]=(...t)=>e.showCropper&&e.showCropper(...t)),src:e.result.image_url,title:e.result.title,class:"image-result"},null,8,z)),(0,s.bF)(l,{class:(0,o.C4)({hidden:!e.clicked}),onReady:e.ready,onCropend:e.cropend,ref:"cropper",title:e.result.title,src:e.result.image_url,rotatable:!1,scalable:!1,zoomable:!1,viewMode:1,aspectRatio:1,minCropBoxWidth:200,minCropBoxHeight:200,checkCrossOrigin:!1},null,8,["class","onReady","onCropend","title","src"])],64)}var M=a(1584),O=a(9962);const T="image/png",K=async(e,t)=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const r=a.getContext("2d");if(!r)throw Error("couldn't get canvas context");r.drawImage(e,0,0);const s=r.getImageData(0,0,a.width,a.height),o=await O.dK.fromBitmap(s),n=parseInt(`${t}`),i=await o.resize({w:n,h:n}).getBuffer(T);return new Blob([i],{type:T})},X=async(e,t,a)=>{const r=Math.min(e.width,e.height);if(r>t)return F(e,t);if(r<t){const t=await K(e,200);return B(t,a)}return Promise.resolve(e)},F=async(e,t)=>{const a=await K(e,t);return createImageBitmap(a,0,0,t,t)},B=async(e,t)=>createImageBitmap(await t.upscale(await createImageBitmap(e)));var U=(0,s.pM)({components:{VueCropper:M.A},props:{result:{required:!0,type:Object}},emits:["selected"],setup(e,{emit:t}){const a=(0,m.KR)(null),r=v(),o=(0,m.KR)(!1);(0,s.hi)((()=>a.value?.destroy()));const n=()=>a.value?.zoomTo(.5),i=()=>{const{x:s,y:o,width:n,height:i}=a.value?.getData(),l=new Image;l.onload=async()=>{const t=document.createElement("canvas");t.width=n,t.height=i;const a=t.getContext("2d");a?.drawImage(l,s,o,n,i,0,0,n,i);const c=200,u=await F(await createImageBitmap(t),c),d=document.createElement("canvas");d.width=u.width,d.height=u.height,d.getContext("bitmaprenderer")?.transferFromImageBitmap(u),r.dispatch("updateCell",{image:d.toDataURL("image/png"),title:e.result.title,bitmap:await createImageBitmap(t,0,0,n,i)})},l.crossOrigin="Anonymous",l.src=e.result.image_url,t("selected",e.result)},l=()=>{o.value=!0,i()};return{cropper:a,ready:n,cropend:i,clicked:o,showCropper:l}}});const P=(0,w.A)(U,[["render",j],["__scopeId","data-v-57493756"]]);var q=P,W=(a(4114),a(4603),a(7566),a(8721),a(181)),N=a.n(W),J=a(1114);a(2489),a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);class V{constructor(){(0,J.A)(this,"last_id",0),(0,J.A)(this,"has_show_more",!1)}denormalizeTab(e){return"character"==e?"characters":e}async search(e,t){if(e.length<3)return[];const a=++this.last_id,{url:r,options:s}=this.fetchURL(t,e),o=await fetch(r,s),n=await o.json();if(this.last_id>a)return[];const i=this.processResult(n,t);return this.filterValidResults(i)}async filterValidResults(e){const t=new WeakSet,a=new Set;return await Promise.all(e.map((async e=>{try{const r=new URL(e.image_url);if(a.has(e.image_url))return;a.add(e.image_url);const s=await fetch(r.toString(),{method:"HEAD"});200===s.status&&t.add(e)}catch(r){}}))),e.filter((e=>t.has(e)))}}class Q extends V{constructor(...e){super(...e),(0,J.A)(this,"has_show_more",!0)}async showMore({tab:e,selected:t}){const a=++this.last_id,{url:r}=this.showMoreURL({tab:e,selected:t}),s=await fetch(r),o=await s.json();if(this.last_id>a)return[];const n=this.processShowMoreResult({result:o,selected:t});return this.filterValidResults(n)}}a(4979);const H=e=>{const t=btoa(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","");return`https://itglxlolghqb6pboiyhguhbmtm0tsqli.lambda-url.us-east-1.on.aws/?url=${t}`};const G=(e,t)=>{switch(e){case"characters":return`fields[${e}]=names,image&filter[name]=${t}`;default:return`fields[${e}]=titles,posterImage&filter[text]=${t}`}};class Y extends V{constructor(...e){super(...e),(0,J.A)(this,"name","kitsu"),(0,J.A)(this,"tabs",["anime","manga","character"])}fetchURL(e,t){return e=this.denormalizeTab(e),{url:`https://kitsu.io/api/edge/${e}?${G(e,encodeURI(t))}`}}processResult(e){return(e.data??[]).map((e=>({mal_id:e.id,title:Z(e)?e.attributes.titles.en_jp:e.attributes.names.en,image_url:Z(e)?e.attributes.posterImage.original||e.attributes.posterImage.large:e.attributes?.image?.original??""}))).filter((e=>e.image_url.length)).map((e=>({...e,image_url:H(e.image_url)})))}}const Z=e=>void 0!==e.attributes.titles;class ee extends V{constructor(...e){super(...e),(0,J.A)(this,"name","anilist"),(0,J.A)(this,"tabs",["anime","manga","character"])}fetchURL(e,t){const a={search:t,page:1,type:e.toUpperCase(),perPage:15},r={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:re[e],variables:a})};return{url:"https://graphql.anilist.co",options:r}}processResult(e,t){return"character"===t?se(e?.data?.Page?.characters):oe(e?.data?.Page?.media)}}const te="query ($id: Int, $page: Int, $perPage: Int, $search: String, $type: MediaType) {\n    Page (page: $page, perPage: $perPage) {\n      media (id: $id, search: $search, type: $type) {\n        id\n        type\n        title {\n          romaji\n        }\n        coverImage {\n            extraLarge\n        }\n      }\n    }\n  }",ae="query ($id: Int, $page: Int, $perPage: Int, $search: String) {\n    Page (page: $page, perPage: $perPage) {\n      characters (id: $id, search: $search) {\n        id\n        name {\n          full\n        }\n        image {\n            large\n        }\n      }\n    }\n  }",re={anime:te,manga:te,character:ae},se=e=>e?e.filter((e=>e.image.large.length)).map((e=>({mal_id:e.id,title:e.name.full,image_url:H(e.image.large)}))):[],oe=e=>e?e.filter((e=>e.coverImage.extraLarge.length)).map((e=>({mal_id:e.id,title:e.title.romaji,image_url:H(e.coverImage.extraLarge)}))):[];class ne extends Q{constructor(...e){super(...e),(0,J.A)(this,"name","jikan"),(0,J.A)(this,"tabs",["anime","manga","character"])}fetchURL(e,t){return e=this.denormalizeTab(e),{url:`https://api.jikan.moe/v4/${e}?limit=15&sort=desc&order_by=favorites&q=${encodeURI(t)}`}}processResult(e){return(e.data??[]).map((e=>({mal_id:e.mal_id,title:e.title||e.name,image_url:e.images.jpg.large_image_url||e.images.jpg.image_url})))}showMoreURL({tab:e,selected:t}){return e=this.denormalizeTab(e),{url:`https://api.jikan.moe/v4/${e}/${t.mal_id}/pictures`}}processShowMoreResult({result:e,selected:t}){return(e?.data??[]).map((e=>({mal_id:Math.random(),title:t.title,image_url:e.jpg.large_image_url||e.jpg.image_url})))}}class ie extends V{constructor(...e){super(...e),(0,J.A)(this,"name","last.fm"),(0,J.A)(this,"tabs",["albums"])}fetchURL(e,t){return{url:`https://ws.audioscrobbler.com/2.0?method=album.search&album=${encodeURI(t)}&api_key=dc639df7a8d4027a6f8d66ba3f9eb0a2&format=json`}}processResult(e){return(e?.results?.albummatches.album??[]).map((e=>({mal_id:Math.random(),title:`${e.artist} - ${e.name}`,image_url:e.image.filter((e=>"extralarge"===e.size)).shift()?.["#text"].replace("300x300","400x400")??""}))).slice(0,15)}}const le="c2238d2e85d4c7b3f18aa58e114ce4e5c6ff808f";class ce extends Q{constructor(...e){super(...e),(0,J.A)(this,"name","giantbomb"),(0,J.A)(this,"tabs",["game","character"])}fetchURL(e,t){return{url:H(`https://www.giantbomb.com/api/search/?api_key=${le}&resources=${e}&query=${encodeURI(t)}&format=json&field_list=id,name,image,guid`)}}processResult(e){return(e?.results??[]).filter((e=>e.image.original_url.length)).map((e=>({guid:e.guid,mal_id:e.id,title:e.name,image_url:H(e.image.original_url)})))}showMoreURL({selected:e}){return{url:H(`https://www.giantbomb.com/api/images/${e.guid}/?api_key=${le}&format=json&limit=30`)}}processShowMoreResult({result:e,selected:t}){return(e?.results??[]).filter((e=>e.original_url.length)).map((e=>({mal_id:Math.random(),title:t.title,image_url:H(e.original_url)})))}}class ue extends V{constructor(...e){super(...e),(0,J.A)(this,"name","vndb"),(0,J.A)(this,"tabs",["vn","character"])}fetchURL(e,t){switch(e){case"vn":return this.fetchVN(t);case"character":return this.fetchCharacter(t);default:throw new Error(`invalid tab: ${e}`)}}fetchVN(e){const t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({filters:["search","=",e],fields:"title,image.url",sort:"searchrank"})};return{url:"https://api.vndb.org/kana/vn",options:t}}fetchCharacter(e){const t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({filters:["search","=",e],fields:"name,image.url",sort:"searchrank"})};return{url:"https://api.vndb.org/kana/character",options:t}}processResult(e,t){return(e.results??[]).map((e=>({mal_id:Math.random(),title:e.title||e.name,image_url:H(e.image.url)}))).slice(0,15)}}const de=[new Y,new ne,new ee,new ie,new ce,new ue],pe=new Map;de.forEach((e=>{pe.set(e.name,e)}));const me=e=>{const t=pe.get(e);if(!t)throw Error("api not found");return t},ge=localStorage.getItem("api")||"anilist",he=de.some((e=>e.name==ge)),ve=he?ge:de[0].name;let fe=me(ve),be="";const we=de.map((e=>e.name)),_e=(0,m.KR)(ve),ke=(0,m.KR)(""),ye=(0,m.KR)(fe.tabs[0]),Ce=(0,m.KR)(!1),Se=(0,m.KR)([]),Ie=(0,m.KR)(fe.tabs),xe=(0,m.KR)(fe.has_show_more),$e=(0,m.KR)(!1),Re=(0,m.KR)(null),Le=N()((async(e,t)=>{Ce.value=!0,$e.value=!1,Re.value=null,xe.value=fe.has_show_more,Se.value=await fe.search(e,t),Ce.value=!1}),500),Ae=async e=>{ye.value=e,await Le(be,e)};(0,s.wB)(_e,(e=>{localStorage.setItem("api",e)})),(0,s.wB)(ke,(async e=>{be=e,await Le(e,ye.value)}));const De=async e=>{Re.value=null,_e.value=e,fe=me(e),Ie.value=fe.tabs,xe.value=fe.has_show_more,fe.tabs.includes(ye.value)||(ye.value=fe.tabs[0]),await Le(be,ye.value)},Ee=async e=>{null!=Re.value&&(Se.value=await fe.showMore({tab:e,selected:Re.value}),$e.value=!0)},ze=async()=>{await Le(be,ye.value)},je=e=>{const t=e.dataTransfer?.files;if(!t)return;const a=[];for(let r=0;r<t.length;r++){const e=t.item(r);a.push({mal_id:Math.random(),title:e.name,image_url:URL.createObjectURL(e)})}Se.value=a,xe.value=!1,$e.value=!1};var Me={apis:de,apiNames:we,currentApi:_e,changeApi:De,tabs:Ie,currentTab:ye,changeTab:Ae,loading:Ce,query:ke,results:Se,has_show_more:xe,showing_more:$e,selected:Re,showMore:Ee,goBack:ze,handleDrop:je},Oe=(0,s.pM)({components:{Cropper:q},setup(){return{...Me}}});const Te=(0,w.A)(Oe,[["render",E],["__scopeId","data-v-3098bb92"]]);var Ke=Te;const Xe=["value"],Fe={class:"container is-max-desktop",id:"bottom"},Be={class:"columns is-gapless"},Ue={key:0},Pe={key:1},qe={class:"column"},We={key:0},Ne=["value"],Je=["value"],Ve={class:"column"},Qe={href:"https://github.com/gqgs/3x3-generator",target:"_blank"};function He(e,t,a,r,n,i){const l=(0,s.g2)("DropDown"),c=(0,s.g2)("ion-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e.processing?((0,s.uX)(),(0,s.CE)("progress",{key:0,class:"progress is-small is-primary my-4",value:e.progress,max:"100"},null,8,Xe)):(0,s.Q3)("",!0),(0,s.Lk)("div",Fe,[(0,s.Lk)("div",Be,[(0,s.bF)(l,{class:"column",options:["200","400"],onClicked:t[0]||(t[0]=t=>e.cellSize=t)},{selected:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,o.v_)(e.size*e.cellSize)+"x"+(0,o.v_)(e.size*e.cellSize),1)])),option:(0,s.k6)((t=>[(0,s.eW)((0,o.v_)(e.size*parseInt(t.option))+"x"+(0,o.v_)(e.size*parseInt(t.option)),1)])),_:1}),(0,s.bF)(l,{class:"column",options:["no-denoise","conservative","denoise1x","denoise2x","denoise3x","pro-no-denoise","pro-conservative","pro-denoise3x"],onClicked:t[1]||(t[1]=t=>e.denoise=t),disabled:200==e.cellSize},{selected:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,o.v_)(e.denoise),1)])),option:(0,s.k6)((e=>[(0,s.eW)((0,o.v_)(e.option),1)])),_:1},8,["disabled"]),(0,s.bF)(l,{class:"column",options:e.workerList,onClicked:t[2]||(t[2]=t=>e.workers=t),title:"Max number of workers used when upscaling images",disabled:200==e.cellSize},{selected:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,o.v_)(e.workers),1)])),option:(0,s.k6)((e=>[(0,s.eW)(" Upscale workers: "+(0,o.v_)(e.option),1)])),_:1},8,["options","disabled"]),(0,s.bF)(l,{class:"column",options:["image/jpeg","image/png","image/webp"],onClicked:t[3]||(t[3]=t=>e.download(t))},{selected:(0,s.k6)((()=>[e.processing?((0,s.uX)(),(0,s.CE)("span",Ue,(0,o.v_)(e.progress_msg),1)):((0,s.uX)(),(0,s.CE)("span",Pe,"Download"))])),option:(0,s.k6)((e=>[(0,s.eW)(" Download ("+(0,o.v_)(e.option)+") ",1)])),_:1}),(0,s.bF)(l,{class:"column",options:["2","3","4","5"],onClicked:t[4]||(t[4]=t=>e.updateSize(t))},{selected:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,o.v_)(e.size)+"x"+(0,o.v_)(e.size),1)])),option:(0,s.k6)((e=>[(0,s.eW)((0,o.v_)(e.option)+"x"+(0,o.v_)(e.option),1)])),_:1}),(0,s.Lk)("div",qe,[(0,s.Lk)("button",{class:"button is-small",onClick:t[5]||(t[5]=t=>e.select_color=!e.select_color)},"Border"),e.select_color?((0,s.uX)(),(0,s.CE)("div",We,[(0,s.Lk)("input",{class:"button is-small",type:"color",id:"color",value:e.color,onInput:t[6]||(t[6]=t=>e.updateColor(t))},null,40,Ne),(0,s.Lk)("input",{class:"is-small",type:"range",value:e.alpha,onInput:t[7]||(t[7]=t=>e.updateAlpha(t))},null,40,Je)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ve,[(0,s.Lk)("a",Qe,[(0,s.bF)(c,{class:"pt-3",id:"github",name:"logo-octocat"})])])])])],64)}var Ge=a(5419),Ye=a.n(Ge);const Ze={class:"dropdown-trigger"},et=["aria-controls","disabled"],tt={class:"icon is-small"},at=["id"],rt={class:"dropdown-content"},st=["onClick"];function ot(e,t,a,n,i,l){const c=(0,s.g2)("ion-icon");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",{class:(0,o.C4)([{"is-active":e.active},"dropdown is-up"])},[(0,s.Lk)("div",Ze,[(0,s.Lk)("button",{class:"button","aria-haspopup":"true","aria-controls":e.dropdown_menu_id,onClick:t[0]||(t[0]=t=>e.active=!e.active),disabled:e.disabled},[(0,s.RG)(e.$slots,"selected",{},void 0,!0),(0,s.Lk)("span",tt,[(0,s.bF)(c,{name:"chevron-down-outline"})])],8,et)]),(0,s.Lk)("div",{class:"dropdown-menu",id:e.dropdown_menu_id,role:"menu"},[(0,s.Lk)("div",rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.options,(t=>((0,s.uX)(),(0,s.CE)("a",{href:"#",key:t,onClick:(0,r.D$)((a=>{e.$emit("clicked",t),e.active=!1}),["prevent"]),class:"dropdown-item"},[(0,s.RG)(e.$slots,"option",{option:t},void 0,!0)],8,st)))),128))])],8,at)],2)])}var nt=(0,s.pM)({props:{options:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},emits:["clicked"],setup(){const e=(0,m.KR)(!1),t=Math.random().toString().slice(-8),a=`dropdown-menu-${t}`;return{active:e,dropdown_menu_id:a}}});const it=(0,w.A)(nt,[["render",ot],["__scopeId","data-v-6106c9b4"]]);var lt=it,ct=a(7535),ut=(0,s.pM)({components:{DropDown:lt},setup(){const e=navigator?.userAgentData?.mobile||!1,t=navigator.hardwareConcurrency,a=v(),r=(0,m.KR)(JSON.parse(localStorage.getItem("cellSize")||"400")),o=(0,m.KR)(JSON.parse(localStorage.getItem("workers")||(e?"1":t.toString()))),n=e=>a.dispatch("updateSize",e),i=e=>a.dispatch("updateColor",e.target.value),l=e=>a.dispatch("updateAlpha",e.target.value),c=(0,m.KR)(localStorage.getItem("denoise:v2")||"denoise1x"),u=(0,m.KR)(0),d="Creating image...",p=(0,m.KR)(!1),g=(0,m.KR)(!1);(0,s.wB)(c,(e=>{a.state.cached_source=null,localStorage.setItem("denoise:v2",e)})),(0,s.wB)(r,(e=>{a.state.cached_source=null,localStorage.setItem("cellSize",JSON.stringify(e))})),(0,s.wB)(o,(e=>{localStorage.setItem("workers",JSON.stringify(e))}));const h=async e=>{const t=r.value,s=a.state.size,n=a.state.images,i=document.createElement("canvas");i.width=s*t,i.height=s*t;const l=i.getContext("2d");if(!l)throw new Error("could not get canvas context");l.strokeStyle=a.getters.color;const c=new ct.y({maxWorkers:o.value,maxInternalWorkers:1,denoiseModel:e}),d=()=>{let e=0;return async a=>{const r=await X(a,t,c);return u.value=++e/Object.keys(n).length*100,r}},p=d(),m=new Map;for(const a of Object.keys(n))n[a]?.bitmap&&m.set(a,p(n[a].bitmap));await Promise.all(Object.values(m));for(let a=0,r=1;a<s;a++)for(let e=0;e<s;e++,r++){const s=m.get(r.toString());s&&(l.drawImage(await s,0,0,t,t,e*t,a*t,t,t),l.strokeRect(e*t,a*t,t,t))}return c.terminate(),i},f=async e=>{a.state.cached_source||(u.value=0,p.value=!0,a.state.cached_source=await h(c.value),p.value=!1);const t=a.state.size;a.state.cached_source.toBlob((a=>{if(null==a)return;let r=`${t}x${t}`;switch(e){case"image/png":r=`${r}.png`;break;case"image/webp":r=`${r}.webp`;break;default:r=`${r}.jpg`}Ye()(a,r)}),e)},b=[...Array(t).keys()].map((e=>(e+1).toString()));return{download:f,cellSize:r,progress:u,progress_msg:d,denoise:c,updateSize:n,updateColor:i,updateAlpha:l,processing:p,workers:o,workerList:b,select_color:g}},computed:{...(0,c.aH)(["size","images","color","alpha"])}});const dt=(0,w.A)(ut,[["render",He],["__scopeId","data-v-3006b213"]]);var pt=dt,mt=(0,s.pM)({name:"App",components:{Cell:k,Search:Ke,Tools:pt},computed:{...(0,c.aH)(["show_search","selected_id"]),...(0,c.L8)(["tiles","complementary_color","color"])},methods:{...(0,c.i0)(["hideSearch"]),hideForm(e){"grid"===e.target.id&&this.hideSearch()}}});const gt=(0,w.A)(mt,[["render",l]]);var ht=gt;(0,r.Ef)(ht).use(f,h).mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,o){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],o=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var u=l(a)}for(t&&t(r);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},r=self["webpackChunk_3x3_generator"]=self["webpackChunk_3x3_generator"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(27)}));r=a.O(r)})();
//# sourceMappingURL=app.dd751e4d.js.map